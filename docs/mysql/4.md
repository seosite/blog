## MySQL执行sql语句的顺序

* 鉴权
* 查询缓存（8.0版本以后被移除）：mysql将查询到的数据放到一个引用表，修改原始表数据后，缓存会被清空；
    * 合理设置缓存大小
    * 将多次查询更改为批量插入
    * 设置查询语句是否使用缓存（SQL_CACHE，SQL_NO_CACHE）
* 查询分析器：对sql语句解析为一个解析树，对sql语句通过语法规则进行验证和解析
* 优化器：mysql在执行之前通过采样统计，来估算记录数，计算查询成本，统计信息会存储到内存或者c持久化存储；
    * mysql将查询转化为执行计划，通过 `show status like 'last_query_cost'` 来取出最小的花费
    * 将外链接转成内连接
    * 使用等价变换规则
    * 优化count()、min()、max()
    * 预估并转换为常数表达式
    * 覆盖索引扫描
    * 子查询优化
    * 提前终止查询
    * 等值传播
    * 列表IN()的比较
* 执行器：操作引擎，返回结果，放入查询缓存
      



## 参考文档
* https://www.kancloud.cn/ervinmeng/mysql/1876503
