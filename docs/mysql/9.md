## MySQL MVCC并发版本控制

* innodb 支持mvcc
* 表还有三个隐藏字段：事务id，回滚指针，id
* 事务
    * redo log：执行的命令都被记录到一个log持久化到硬盘上
    * undo log：copy数据行的内容到磁盘
    * 锁：共享锁和排它锁等同读写锁
    * 隔离级别
* 执行过程：
    * 排它锁锁定改行
    * redo log记录sql语句
    * undo log记录之前这行的数据
    * undo log会类增，但是后续innodb会单独有一个purge的线程，删除老的undo文件
* MVCC 就是基于undo log做的串行化的多版本记录

 