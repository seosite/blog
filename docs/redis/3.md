## Redis怎么保证原子性

* redis是单线程的
* redis是异步非阻塞
* redis注册到多路复用epoll的方式后，通过主动轮询多路复用的方式，来逐个取出将要执行的事件，放入到fired，逐个执行
* redis的网络请求，会有一个事件循环eventLoop，里面有events和fired两个数组；events放被注册的事件，fired存放从多路复用中读取到的将要执行的事件

![](https://cdn.jsdelivr.net/gh/seosite/imgbed/posts/20200927101354.png)

![](https://cdn.jsdelivr.net/gh/seosite/imgbed/posts/20200927101630.png)

## 参考资料

* https://www.cnblogs.com/shijingxiang/articles/13112275.html
* https://www.sohu.com/a/324014689_120047065
* https://www.jianshu.com/p/f42d5f5c495b